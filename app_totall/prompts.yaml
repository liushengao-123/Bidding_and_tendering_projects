# prompts.yaml

# 修复1：冒号后加空格
# 修复2：统一2空格缩进
# 修复3：保持统一缩进
#| 特点：严格保留换行和缩进，适合需要精确控制格式的场景（如代码、提示词模板）
#> 将换行符替换为空格，合并连续空格，适合自然语言段落（如说明文字）
#{ } 在 YAML 中无需转义，但若包含 : 或 # 等符号，需用引号包裹整个字符串  "注意：此处有冒号: 需引号包裹"
##结尾空行控制
# | 或 > 后加 - 可去除末尾空行（如 |-）。
# 默认保留字符串末尾的换行符。







NOTE : |
  要求1:不需要保留占位符;
  要求2:填充模板会有两大类：服务类和货物类；从两大类模板中，选择一类；在输出内容中，不需要输出适用于服务类项目和适用于货物类项目等字样，但是需要在1.1中包含服务或货物字样。


LLM_KEY-VALUE_MAP : |
  {
  "procurementContent": "采购内容",
  "servicePeriod": "采购内容中抽取服务周期或合同期",
  "projectBudget": "预算金额",
  "sectionDivision": "标段 /标包划分或标包、标段划分",
  "InquiryType": "标段 /标包划分或标包、标段划分",
  "contractSigningMode": "合同签约模式",
  "inquiryForm": "组织形式",
  "Max_projectBudget": "最高限价",
  "Bid_Security_Amount": "采购及履约过程风险控制中抽取应答保证金或投标保证金",
  "Evaluators_Number": "评审委员会组成或评标委员会组成",
  "Selected_Principles": "中选人确定原则",
  "Performance_Bond": "采购及履约过程风险控制中抽取履约保证金",
  "Special_Circumstances": "公开招标或公开比选",
  "Post-Evaluation_weight": "评审办法",
  "Delivery_Period": "采购方案-合同主要条款中抽取交货期",
  "Delivery_Location": "从采购方案-合同主要条款中抽取交货地点"
  }


LLM_KEY-VALUE_MAP_2 : |
  {
  "Bidder": "此字段从采购方案-潜在供应商资格条件中抽取,举例：应答人须为在中华人民共和国境内依法注册的法人或其他组织。",
  "Performance": "此字段从采购方案-潜在供应商资格条件中抽取，如果有①、②、③等分项，需加上，举例：业绩要求:应答人须具有2022-01-01至应答截止日期类似业绩，累计类似业绩数量不低于1个，单个金额不低于30万元。核算业绩数量以合同数量为准；核算业绩金额单项合同以合同金额为准，框架合同以对应订单金额为准。应答人须提供合同关键页扫描件（原件备查）等证明材料:①合同关键页包括不限于合同封面、合同金额、合同服务内容（合同标的）、合同大签页面等；凡提供框架合同的，必须同时提供相对应的采购订单（或结算单）；②订单（或结算单）须由甲方签字或盖章，否则视为无效订单（或结算单） ；③业绩日期认定：单项合同以大签页签订日期为准，框架合同以有效期内订单或结算单签字日期为准。",
  "Credit_Requirements":"此字段从采购方案-潜在供应商资格条件中抽取,举例：应答人不得存在以下情况：1) 被责令停业的；2) 财产被接管或冻结，影响正常经营的；3) 在全国企业信用信息公示系统中被列入严重违法失信企业名单；4) 法定代表人或负责人 被“信用中国”网站列入失信被执行人名单（已执行完毕或不再执行的除外）；5) 在“信用中国”和工信部网站被相关行政监督部门暂停或取消应答/中选资格的（不受地域限制）；6) 在“信用中国”和工信部网站最近三年内（至本项目应答截止日期前36个月内）有被相关行政监督部门判定并发布弄虚作假骗取中标或严重违约或重大安全及事故责任、质量问题的。",
  "Agent":"此字段从采购方案-潜在供应商资格条件中抽取,举例：本项目不允许代理商投标。",
  "Consortium":"此字段从采购方案-潜在供应商资格条件中抽取,举例：本项目不接受联合体应答",
  "No_reading_bids":"此字段为采购方案-特殊情况处理中的公开比选，举例：比选项目或某标段供应商不足3家时，按照以下方式处理：一、购买采购文件、递交应答文件的供应商不足3家时：1、 比选项目购买采购文件的供应商、递交应答文件供应商仅有1家时，应重新启动比选程序，并书面告知该供应商后续重新启动的相关事宜。若重新启动后供应商数量仍不足的，采购人可继续实施后续比选程序或与应答供应商进行谈判。 2、比选项目购买采购文件的供应商、递交应答文件供应商为2家时，可继续实施后续比选程序或与应答供应商进行谈判。二、比选项目因在评审过程中否决投标导致供应商数量不足3家时，若评审委员会认定项目仍具备竞争性，可继续实施后续采购过程；若评审委员会认定项目已不具备竞争性，应重新组织采购。",
  "Price_Evaluation_Method":"此字段从采购方案-评审方法中的评审办法-(1、价格)中抽取,举例：中间价法",
  "Evaluated_Price":"此字段从采购方案-评审方法中的评审办法-(1、价格)中抽取,举例：经初步评审合格的有效应答报价中，以各应答人的综合折扣作为评审价。若各应答人报价税率存在差异，应按照如下方法对报价进行调整，该应答人的评审价=该应答人应答折扣*（1+[max(所有应答人税率)-该应答人税率]*12%）。",
  "Basic_Evaluated_Price_Group": "此字段从采购方案-评审方法中的评审办法-(1、价格)中抽取,举例：①当有效应答人≥7家时，去掉一个最高价和一个最低价后，以其余应答人评审价作为基础评审价组；当有效应答人＜7家时，则均计入基础评审价组。②如基础评审价组中单个应答人评审价高出或低出基础评审价组平均值20%以上（含20%），该应答报价则从基础评审价组中去除，不参与评审基准价的计算；如基础评审价组中每个应答人评审价与基础评审价组平均值偏差均在20%以上，则不做剔除，均参与评审基准价的计算。若技术得分中，客观部分得分低于客观部分总分的60%时，应答人评审价不纳入基础评审价组",
  "k_value": "此字段从采购方案-评审方法中的评审办法-(1、价格)中抽取,举例：K值采用唱价现场随机抽取方式确定。（K值抽取范围为90%,91%,92%,93%,94%,95%）。",
  "Evaluation_Base_Price": "此字段从采购方案-评审方法中的评审办法-(1、价格)中抽取,举例：评审基准价=基础评审价组的算术平均值×K值。\n评审基准价计算小数点后保留2位，小数点后第三位“四舍五入",
  "Scoring_Item":"此字段从采购方案-评审方法中的评审办法-(2、技术)表格中评分项目字段对应的所有内容中抽取,举例：1:企业综合实力;2:类似项目业绩;3:服务质量评价;4:服务能力;5:检验报告;6:管理制度与服务方案",
  "Scoring_Sub_item":"此字段从采购方案-评审方法中的评审办法-(2、技术)表格中评分细项字段对应的所有内容中抽取,举例：1:认证证书;2:类似项目业绩;3:服务质量评价;4:货源保障能力;5:检验报告;6:管理制度与服务方案",
  "Scoring_Content":"此字段从采购方案-评审方法中的评审办法-(2、技术)表格中评分细则字段对应的所有内容中抽取,举例：1:根据应答人提供的以下证书进行评审：1、具备有效的食品安全管理体系认证证书，得1分；2、具备有效的质量管理体系认证证书，得1分；3、具备有效的环境管理体系认证证书，得1分；4、具备有效的职业健康安全管理体系认证证书，得1分；5、具备有效的HACCP危害分析与关键控制点体系认证证书，得1分。;2:根据应答人自2022年01月01日起至应答截止之日（以合同签订日期为准）类似项目业绩进行评审。 每多提供一份单个合同金额不低于30万元的业绩合同得6分，满分30分。;3:根据应答人提供的上述已认定的类似项目业绩服务质量评价进行评审：每提供一个有效的服务质量评价，得2.5分，满分5分。同一个类似项目业绩服务质量评价最多得2.5分。;4:根据应答人提供的蔬菜类、水果类、肉类、水产类、蛋类、米类、面粉类、食用油类、调味料类、杂粮类等货源有效期内的供货合同（协议）进行评审，每提供一类食材的供货合同（协议），得1.5分，满分15分。;5:根据应答人提供的2024年1月1日至应答截止之日出具的配送食材的检验报告进行评审，可提供蔬菜类、水果类、肉类、水产类、蛋类、米类、面粉类、食用油类、调味料类、杂粮类等的食材检验报告，每提供一类食材检验报告得1.5分，满分15分。;6:结合本项目实际需求提供详细的管理制度与服务方案，方案包含但不限于：1、配送服务方案；2、质量控制、保障制度和措施；3、食品安全保障措施和制度；4、紧急需求保障方案；5、安全应急预案。根据应答人提供管理制度与服务方案的完整性、合理性、理解透彻性、针对性、可实施性等情况进行评审，每小项满分6分,本项满分30分。各小项评审标准如下：（1）方案完整、合理、对本项目要求理解透彻、针对性强、可操作性强，得（4,6]分；（2）方案基本完整、相对合理、对本项目要求理解比较透彻、针对性较强、可操作性较强，得（2,4]分；（3）方案不完整、合理性较差不够、对本项目要求理解模糊、针对性不强、可操作不强，得[0,2]分。;",
  "Score_Attribute":"此字段从采购方案-评审方法中的评审办法-(2、技术)表格中分值属性字段对应的所有内容中抽取,举例：1:客观;2:客观;3:客观;4:客观;5:客观;6:主观",
  "Score":"此字段从采购方案-评审方法中的评审办法-(2、技术)表格中分值字段对应的所有内容中抽取,举例：1:5;2:30;3:5;4:15;5:15;6:30",
  "Score_type":"此字段从采购方案-评审方法中的评审办法-(2、技术)表格中分值类型字段对应的所有内容中抽取,材料中没有，设置为文本/文字，举例：1:文本/文字;2:文本/文字;3:文本/文字;4:文本/文字;5:文本/文字;6:文本/文字"
  }




  

EXAMPLE : |
  [
  {"key":"procurementContent","value":货物。榆林分公司公司员工餐厅食材采购，主要包括米面粮油及副食品类（米、面、油、调味品、干货、辅食类等）、生鲜肉蛋及果蔬类（蔬菜、水果、肉、蛋、奶等） 食材。"},
  {"key":"projectBudget","value":"本项目预算金额277.75万元(不含税)。"},
  {"key":"servicePeriod","value":"自合同签订之日起一年。"},
  {"key":"sectionDivision","value":"本项目不划分标包。"},
  {"key":"contractSigningMode","value":"本项目签订框架合同，合同金额按预算金额签订。"},
  {"key":"Bidder","value":"应答人须为在中华人民共和国境内依法注册的法人或其他组织。"},
  {"key":"Tax_Requirements","value":"应答人能够开具增值税专用发票(须提供相关证明材料)。"},
  {"key":"Qualification","value":"应答人需具备：须具备有效的食品经营许可证。"},
  {"key": "Bid_Security_Amount", "value": "为保证公司合法权益，向应答人收取应答保证金20000元；通过ES系统管理保证金。"},
  {"key": "Performance_Bond", "value": "人民币中选金额2%。"}
  ] 


SHANGHAI_SYSTEM_PROMPT: |
  你是一个高度智能、逻辑严谨的结构化文档信息抽取AI助手。

  你的任务是根据一个“Key对应关系表”从“源数据文档”中提取信息。请严格按照以下三种优先级递减的模式进行操作：

  **模式1：直接映射 (Direct Mapping) - 优先级最高**
  -   **触发条件**: 关系表中的中文值为一个或多个用“或”连接的**实体名词**（如 "预算金额"）。
  -   **核心逻辑**: 在文档中寻找一个与所提供名词完全匹配的**键 (key)**。
  -   **执行流程**:
      a. 识别出所有备选名词（如 "公开招标"、"公开比选"）。
      b. **完整地、深度地**遍历整个“源数据文档”的所有层级，搜索是否存在一个**键**与备选名词列表中的任意一个完全匹配。
      c. 如果找到，立即提取其对应的完整value，并结束对此英语key的处理。

  **模式2：定向抽取 (Targeted Extraction) - 优先级中**
  -   **触发条件**: 关系表中的中文值为包含**“中抽取”等指令性描述**的句子。
  -   **核心逻辑**: 在一个已存在的**值 (value)** 中，抽取出一段**子文本 (sub-text)**。
  -   **执行流程**: (此部分逻辑不变)
      a. 解析指令，明确“源文本定位词”和“抽取目标词”。
      b. 使用“源文本定位词”作为key，执行一次**模式1**的查找，获取基础长文本。
      c. 在基础文本中，根据“抽取目标词”（可含“或”）进行搜索，提取完整信息。

  **模式3：情境推断 (Contextual Inference) - 优先级最低**
  -   **触发条件**: 当且仅当**模式1**完全失败（即在整个文档中都找不到匹配的**键**）时，自动启用此模式。
  -   **核心逻辑**: 寻找一个**值 (value)**，其内容与查找目标高度相关，然后提取该值所在对象的**兄弟节点信息**。
  -   **执行流程**:
      a. **重新扫描**: 再次深度遍历整个文档，这次是寻找某个**值 (value)** 的内容**包含**备选名词（如 "公开比选"）。
      b. **定位关键节点**: 找到这个值后，定位到包含它的那个JSON对象（例如，`{"采购方式及理由": "公开比选。..."}`）。
      c. **推断并提取**: 分析这个关键节点所在的上下文。模型需要推断出，与这个采购方式（公开比选）相关的“特殊情况处理”很可能就在附近。因此，它应该查找与这个节点同级的、标题中含有“特殊情况”、“处理”等字样的**兄弟节点**或**父节点的其他子节点**，并提取其内容。例如，它会找到`{"公开比选": "当购买比选文件..."}`这个对象，并提取其value。

  **最终规则**:
  1.  **严格按优先级执行**: 对于每个key，必须先尝试模式1。只有当模式1确定性失败后，才能尝试模式3。模式2是独立触发的。
  2.  **完整遍历**: **严禁**在找到一个看似相关的线索后就停止对整个文档的遍历。必须完成对所有层级的搜索，才能判定模式1失败。
  3.  **精确简洁**: 在模式2和模式3中，返回的结果应尽可能完整。
  4.  **格式统一**: 最终返回一个JSON对象数组，格式与样例一致。
  5.  **最终缺失**: 只有当所有适用模式都尝试失败后，才将值设为 null。
  6.  **保持纯净**: 不要在JSON结果之外添加任何解释。




SHANGHAI_SYSTEM_PROMPT_2: |
  """
  你是一个高度智能的、专门用于从结构化文档中抽取信息的AI助手。你的任务是根据一套详细的“抽取指令表”从一份复杂的JSON“源数据文档”中提取信息。
  
  你的任务流程如下：
  1.  你将收到一个 **“抽取指令表”** (即“Key对应关系表”)。表中的每一项都包含一个最终输出用的`英语key`和一段详细的`中文描述`。这段描述指明了需要抽取的信息内容，并通常包含一个具体的**“文本示例”**作为查找线索。
  2.  你还将收到一份 **“源数据文档”** (一个复杂的、可能包含多层嵌套的JSON结构)。
  3.  对于 **“抽取指令表”** 中的每一个`英语key`，请执行以下操作：
      a. **理解指令**：仔细阅读对应的`中文描述`，特别是`“举例：”`后面的内容，将其作为在源数据文档中搜索的核心**“目标文本”**。
      b. **智能定位与搜索**：在整个 **“源数据文档”** 中，**深入递归地搜索**这个“目标文本”。这个“目标文本”很可能在源文档中作为一个JSON的`key`出现。
      c. **精确提取**：
          - 如果找到的“目标文本”是源文档中的一个`key`，且其对应的`value`是一个**有意义的、非空的字符串**，请将这个`key`和它的`value`合并成一个完整的段落作为提取结果。
          - 如果找到的“目标文本”是源文档中的一个`key`，但其对应的`value`是**空的** (例如 `[]`) 或无意义，请直接提取这个`key`本身作为结果。
          - 如果“目标文本”出现在表格结构中，请提取与之关联的核心信息（例如，同一行中的对应值）。
  
  请严格遵守以下规则：
  1.  **深度搜索**：源数据文档是嵌套的。你必须遍历所有层级，包括列表中的字典和表格数据，来查找匹配的“目标文本”。
  2.  **上下文感知**：利用指令描述中的上下文信息（如“从采购方案-潜在供应商资格条件中抽取”）来辅助定位，确保找到最准确的匹配项。
  3.  **格式要求**：最终返回一个JSON对象数组，格式与用户提供的“输出样例”完全一致。JSON对象中的`key`必须是原始的`英语key`。
  4.  **缺失处理**：如果在整个源数据文档中都找不到某个指令对应的“目标文本”，其对应的值应为 "null"。
  5.  **保持纯净**：不要在最终的JSON结果之外添加任何解释、思考过程或问候语。
  """





# SHANGHAI_USER_PROMPT : |
#   """
# 请根据你在系统指令中被设定的角色和规则，处理以下信息并返回JSON结果。

# ### 1. Key对应关系表 (English Key -> Chinese Key)
# ---
# {LLM_KEY_VALUE_MAP}

# ### 2. 源数据文档 (Source Document to search in)
# ---
# {KEY_VALUE}

# ### 3. 输出样例 (Output Example)
# ---
# {example}

# 请开始抽取。
# """


  